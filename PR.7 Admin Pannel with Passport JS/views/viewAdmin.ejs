<%- include('header')%>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <!-- ============================================================== -->
    <!-- Page wrapper  -->
    <!-- ============================================================== -->
    <div class="page-wrapper">
        <!-- ============================================================== -->
        <!-- Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <h4 class="page-title">Tables</h4>
                    <div class="ml-auto text-right">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Library</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
            <!-- ============================================================== -->
            <!-- Start Page Content -->
            <!-- ============================================================== -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title m-b-0">Static Table</h5>
                        </div>
                        <div class="mb-3">
                            <form class="form-inline" method="get" action="/admin/viewAdmin">
                            <div class="input-group">
                                <input type="text" name="search"
                                    value="<%= typeof search !== 'undefined' ? search : '' %>" class="form-control"
                                    placeholder="Search by Name, Email, City" style="min-width: 250px;">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" type="submit">Search</button>
                                </div>
                            </div>
                        </form>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Profile</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Qualification</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% AdminRecord.map((v,i)=> {%>
                                    <tr>
                                        <th scope="row">
                                            <%=++i%>
                                        </th>
                                        <td><img src="<%= v.profile %>" height="100" width="100"
                                                style="border-radius: 50%;"></td>
                                        <td>
                                            <%= v.name %>
                                        </td>
                                        <td>
                                            <%= v.email %>
                                        </td>
                                        <td>
                                            <%= v.qualification %>
                                        </td>
                                        <td>
                                            <a href="deleteAdmin/<%=v._id%>" class="text-dark m-1"><i
                                                    class="fas fa-trash"></i></a>
                                            <a href="/admin/editAdmin/<%=v._id%>" class="text-dark m-1"><i
                                                    class="far fa-edit"></i></a>
                                            <a href="#ex1" rel="modal:open" class="text-dark m-1"
                                                onclick="viewSingle('<%=v.id%>')"><i class="fas fa-eye"></i></a>
                                        </td>
                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="ex1" class="modal">
            <p>Name: <span id="name"></span></p>
            <a href="#" rel="modal:close">Close</a>
        </div>

        <%- include('footer')%>

            <script>
                const viewSingle = (id) => {
                    $.ajax({
                        url: "/admin/viewSingle/" + id,
                        type: 'get',
                        success: function (res) {
                            if (res.status === 'success') {
                                const data = res.data
                                $('#name').html(data.name)
                            }
                            console.log(res)
                        },
                    })
                }
            </script>